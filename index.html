<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alice&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <title>Document</title>
    <style>
        .whiteBar {
            background-image: url('Motif_Central_White.png');
            background-repeat: repeat-x;
            height: 40px;
            width: 100%;
        }

        .goldenBar {
            background-image: url('Motif_Central.png');
            background-repeat: repeat-x;
            height: 40px;
            width: 100%;
        }

        .textCol {
            color: #b98027;
        }

        .alice-regular {
            font-family: "Alice", serif;
            font-weight: 400;
            font-style: normal;
        }

        .icons-b {
            border: 4px solid black;
            padding: 7px;
            border-radius: 50%;
        }

        .icon-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            transition: transform 0.2s;
        }

        .icon-wrapper:hover {
            transform: scale(1.1);
        }
    </style>
</head>

<body style="background-color: #61a0b1;" class="py-5 relative">
    <div class="whiteBar"></div>
    <div class="bg-white p-4 mx-4 sm:mx-6 rounded-3xl shadow-lg">
        <!-- Header Section -->
        <div class="relative flex items-center justify-between w-full mb-4">
            <div class="textCol alice-regular text-2xl flex items-center gap-2">
                Data Update Drive V6.9
            </div>
            <div class="absolute left-[50%] translate-x-[-50%]">
                <img src="./logo.png" alt="Idaratut Ta'reef al Shakhsi (ITS)" class="h-12">
            </div>
            <div class="flex items-center gap-3 textCol font-semibold">
                <img src="./NoPhoto.jpg" alt="User" class="rounded-[50%] h-12">
                50462453 | Burhanuddin Bhai Mustafa Bhai Nasikwala
            </div>
        </div>
        <!-- Golden Bar -->
        <div class="goldenBar mb-4"></div>
        <!-- Icon Bar -->
        <div class="relative flex flex-wrap place-content-evenly p-5 gap-4">
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">account_tree</i>
                <p class="textCol text-sm">Personal</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">call</i>
                <p class="textCol text-sm">Contact</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">home</i>
                <p class="textCol text-sm">Residence</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">school</i>
                <p class="textCol text-sm">Education</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">work</i>
                <p class="textCol text-sm">Occupation</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">contact_mail</i>
                <p class="textCol text-sm">Contact Mail</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">explore</i>
                <p class="textCol text-sm">Ziyarat</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">menu_book</i>
                <p class="textCol text-sm">Asbaaq</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">cloud_upload</i>
                <p class="textCol text-sm">Upload</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">list</i>
                <p class="textCol text-sm">Summary</p>
            </div>
            <div class="icon-wrapper">
                <i class="material-icons textCol icons-b">beenhere</i>
                <p class="textCol text-sm">Status</p>
            </div>
        </div>
    </div>
    <br>
    <div class="bg-white p-4 mx-4 sm:mx-6 rounded-3xl shadow-lg">
        <!-- Header -->
        <div class="flex justify-between items-center mb-4">
            <div class="textCol alice-regular text-2xl">HEALTH DETAILS</div>
            <i class="material-icons text-green-600 cursor-pointer" id="toggleEdit">edit</i>
        </div>
        <!-- Golden Bar -->
        <div class="goldenBar mb-4"></div>
        <!-- Health Details Content -->
        <div id="healthContent">
            <!-- View Mode -->
            <div id="viewMode" class="hidden">
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                    <p class="border-solid border-2 border-gray-500 rounded-3xl p-3"><strong>Blood Group:</strong> <span
                            id="viewBloodGroup"></span></p>
                    <p class="border-solid border-2 border-gray-500 rounded-3xl p-3"><strong>Blood Donating
                            Preference:</strong> <span id="viewBloodPreference"></span></p>
                    <p class="border-solid border-2 border-gray-500 rounded-3xl p-3"><strong>Chronic Diseases:</strong>
                        <span id="viewChronicDiseases"></span></p>
                    <p class="border-solid border-2 border-gray-500 rounded-3xl p-3"><strong>Fitness Activity:</strong>
                        <span id="viewFitnessActivity"></span></p>
                    <p class="border-solid border-2 border-gray-500 rounded-3xl p-3"><strong>Sports Activity:</strong>
                        <span id="viewSportsActivity"></span></p>
                    <p class="border-solid border-2 border-gray-500 rounded-3xl p-3"><strong>Height:</strong> <span
                            id="viewHeight"></span></p>
                    <p class="border-solid border-2 border-gray-500 rounded-3xl p-3"><strong>Weight:</strong> <span
                            id="viewWeight"></span></p>
                    <p class="border-solid border-2 border-gray-500 rounded-3xl p-3"><strong>BMI:</strong> <i
                            class="material-icons inline-block">person</i> <span id="viewBMI"></span>
                    </p>
                </div>
                <div class="mt-4">
                    <p><strong>Vaccinations:</strong></p>
                    <ul id="viewVaccinations" class="list-disc pl-5"></ul>
                </div>
            </div>
            <!-- Form Mode -->
            <form id="healthForm" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                    <label for="bloodGroup" class="block text-sm">Blood Group</label>
                    <select id="bloodGroup" class="w-full p-2 border rounded">
                        <option value="">Select</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm">Blood Donating Preference</label>
                    <div class="flex gap-4">
                        <label><input type="radio" name="bloodPreference" value="Always" checked> Always</label>
                        <label><input type="radio" name="bloodPreference" value="Sometimes"> Sometimes</label>
                        <label><input type="radio" name="bloodPreference" value="Never"> Never</label>
                    </div>
                </div>
                <div>
                    <label for="chronicDiseases" class="block text-sm">Chronic Diseases</label>
                    <select id="chronicDiseases" multiple class="w-full p-2 border rounded">
                        <option value="Diabetes">Diabetes</option>
                        <option value="Hypertension">Hypertension</option>
                        <option value="Asthma">Asthma</option>
                        <option value="Heart Disease">Heart Disease</option>
                        <option value="None">None</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm">Fitness Activity</label>
                    <div class="flex gap-4">
                        <label><input type="radio" name="fitnessActivity" value="Daily" checked> Daily</label>
                        <label><input type="radio" name="fitnessActivity" value="Thrice a week"> Thrice a week</label>
                        <label><input type="radio" name="fitnessActivity" value="Occasionally"> Occasionally</label>
                        <label><input type="radio" name="fitnessActivity" value="Rarely"> Rarely</label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm">Sports Activity</label>
                    <div class="flex gap-4">
                        <label><input type="radio" name="sportsActivity" value="Daily" checked> Daily</label>
                        <label><input type="radio" name="sportsActivity" value="Thrice a week"> Thrice a week</label>
                        <label><input type="radio" name="sportsActivity" value="Occasionally"> Occasionally</label>
                        <label><input type="radio" name="sportsActivity" value="Rarely"> Rarely</label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm">Height</label>
                    <div class="flex gap-2">
                        <input type="number" id="heightFeet" placeholder="Feet" class="w-1/2 p-2 border rounded"
                            min="0">
                        <input type="number" id="heightInches" placeholder="Inches" class="w-1/2 p-2 border rounded"
                            min="0" max="11">
                    </div>
                </div>
                <div>
                    <label for="weight" class="block text-sm">Weight (kg)</label>
                    <input type="number" id="weight" class="w-full p-2 border rounded" min="0">
                </div>
                <div>
                    <label class="block text-sm">BMI</label>
                    <p><i class="material-icons inline-block">person</i> <span id="bmiDisplay">N/A</span></p>
                </div>
                <div class="col-span-1 sm:col-span-2">
                    <label for="vaccinations" class="block text-sm">Vaccinations</label>
                    <select id="vaccinations" class="w-full p-2 border rounded">
                        <option value="">Select Vaccine</option>
                        <option value="Pfizer">Pfizer (2 doses)</option>
                        <option value="Moderna">Moderna (2 doses)</option>
                        <option value="AstraZeneca">AstraZeneca (2 doses)</option>
                        <option value="Johnson & Johnson">Johnson & Johnson (1 dose)</option>
                        <option value="Polio">Polio</option>
                        <option value="MMR">MMR</option>
                    </select>
                    <div id="selectedVaccines" class="mt-2"></div>
                </div>
                <div class="col-span-1 sm:col-span-2 flex justify-end gap-2">
                    <button type="button" id="cancelEdit"
                        class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancel</button>
                    <button type="submit"
                        class="px-4 py-2 bg-[#b98027] text-white rounded hover:bg-[#8b5e1b]">Save</button>
                </div>
            </form>
        </div>
    </div>
</body>
<script>
    const healthForm = document.getElementById('healthForm');
    const viewMode = document.getElementById('viewMode');
    const toggleEdit = document.getElementById('toggleEdit');
    const cancelEdit = document.getElementById('cancelEdit');
    const bmiDisplay = document.getElementById('bmiDisplay');
    const heightFeet = document.getElementById('heightFeet');
    const heightInches = document.getElementById('heightInches');
    const weight = document.getElementById('weight');
    const vaccinationsSelect = document.getElementById('vaccinations');
    const selectedVaccinesDiv = document.getElementById('selectedVaccines');

    // Load data from localStorage
    let healthData = JSON.parse(localStorage.getItem('healthDetails')) || {
        bloodGroup: '',
        bloodPreference: '',
        chronicDiseases: [],
        fitnessActivity: '',
        sportsActivity: '',
        heightFeet: '',
        heightInches: '',
        weight: '',
        vaccinations: []
    };

    // Initialize form and view
    function updateView() {
        document.getElementById('viewBloodGroup').textContent = healthData.bloodGroup || 'N/A';
        document.getElementById('viewBloodPreference').textContent = healthData.bloodPreference || 'N/A';
        document.getElementById('viewChronicDiseases').textContent = healthData.chronicDiseases.length ? healthData.chronicDiseases.join(', ') : 'None';
        document.getElementById('viewFitnessActivity').textContent = healthData.fitnessActivity || 'N/A';
        document.getElementById('viewSportsActivity').textContent = healthData.sportsActivity || 'N/A';
        document.getElementById('viewHeight').textContent = healthData.heightFeet ? `${healthData.heightFeet} ft ${healthData.heightInches || 0} in` : 'N/A';
        document.getElementById('viewWeight').textContent = healthData.weight ? `${healthData.weight} kg` : 'N/A';
        const bmi = calculateBMI();
        document.getElementById('viewBMI').textContent = bmi ? bmi.toFixed(1) : 'N/A';

        const vaccineList = document.getElementById('viewVaccinations');
        vaccineList.innerHTML = '';
        healthData.vaccinations.forEach(vaccine => {
            const li = document.createElement('li');
            const doses = vaccine.name.includes('Pfizer') || vaccine.name.includes('Moderna') || vaccine.name.includes('AstraZeneca') ? 2 : 1;
            li.textContent = `${vaccine.name} (${doses > 1 ? 'Dose ' + vaccine.dose : ''}): ${vaccine.date ? 'Vaccinated (' + vaccine.date + ')' : 'Not Vaccinated'}`;
            vaccineList.appendChild(li);
        });
    }

    function updateForm() {
        document.getElementById('bloodGroup').value = healthData.bloodGroup;
        document.querySelector(`input[name="bloodPreference"][value="${healthData.bloodPreference}"]`)?.setAttribute('checked', true);
        const chronicSelect = document.getElementById('chronicDiseases');
        Array.from(chronicSelect.options).forEach(option => {
            option.selected = healthData.chronicDiseases.includes(option.value);
        });
        document.querySelector(`input[name="fitnessActivity"][value="${healthData.fitnessActivity}"]`)?.setAttribute('checked', true);
        document.querySelector(`input[name="sportsActivity"][value="${healthData.sportsActivity}"]`)?.setAttribute('checked', true);
        heightFeet.value = healthData.heightFeet;
        heightInches.value = healthData.heightInches;
        weight.value = healthData.weight;
        updateVaccinesList();
        updateBMI();
    }

    function calculateBMI() {
        const feet = parseFloat(heightFeet.value) || 0;
        const inches = parseFloat(heightInches.value) || 0;
        const kg = parseFloat(weight.value) || 0;
        const heightM = (feet * 0.3048) + (inches * 0.0254);
        if (heightM > 0 && kg > 0) {
            return kg / (heightM * heightM);
        }
        return null;
    }

    function updateBMI() {
        const bmi = calculateBMI();
        bmiDisplay.textContent = bmi ? bmi.toFixed(1) : 'N/A';
    }

    function updateVaccinesList() {
        selectedVaccinesDiv.innerHTML = '';
        healthData.vaccinations.forEach((vaccine, index) => {
            const div = document.createElement('div');
            div.className = 'flex items-center gap-2 mt-2';
            div.innerHTML = `
                <span>${vaccine.name}${vaccine.dose ? ' (Dose ' + vaccine.dose + ')' : ''}</span>
                <input type="date" class="p-2 border rounded" value="${vaccine.date || ''}">
                <button type="button" class="text-red-500" onclick="removeVaccine(${index})">Remove</button>
            `;
            selectedVaccinesDiv.appendChild(div);
        });
    }

    window.removeVaccine = function (index) {
        healthData.vaccinations.splice(index, 1);
        updateVaccinesList();
    };

    // Toggle between view and form
    toggleEdit.addEventListener('click', () => {
        viewMode.classList.toggle('hidden');
        healthForm.classList.toggle('hidden');
        if (!viewMode.classList.contains('hidden')) {
            healthForm.reset();
            updateForm();
        }
    });

    cancelEdit.addEventListener('click', () => {
        viewMode.classList.remove('hidden');
        healthForm.classList.add('hidden');
        updateForm();
    });

    // Handle form submission
    healthForm.addEventListener('submit', (e) => {
        e.preventDefault();
        healthData = {
            bloodGroup: document.getElementById('bloodGroup').value,
            bloodPreference: document.querySelector('input[name="bloodPreference"]:checked')?.value || '',
            chronicDiseases: Array.from(document.getElementById('chronicDiseases').selectedOptions).map(opt => opt.value),
            fitnessActivity: document.querySelector('input[name="fitnessActivity"]:checked')?.value || '',
            sportsActivity: document.querySelector('input[name="sportsActivity"]:checked')?.value || '',
            heightFeet: heightFeet.value,
            heightInches: heightInches.value,
            weight: weight.value,
            vaccinations: healthData.vaccinations
        };
        localStorage.setItem('healthDetails', JSON.stringify(healthData));
        viewMode.classList.remove('hidden');
        healthForm.classList.add('hidden');
        updateView();
    });

    // Handle vaccination selection
    vaccinationsSelect.addEventListener('change', () => {
        const value = vaccinationsSelect.value;
        if (value && !healthData.vaccinations.some(v => v.name === value)) {
            const doses = value.includes('Pfizer') || value.includes('Moderna') || value.includes('AstraZeneca') ? 2 : 1;
            for (let i = 1; i <= doses; i++) {
                healthData.vaccinations.push({ name: value, dose: doses > 1 ? i : null, date: '' });
            }
            updateVaccinesList();
            vaccinationsSelect.value = '';
        }
    });

    // Update BMI on height/weight change
    heightFeet.addEventListener('input', updateBMI);
    heightInches.addEventListener('input', updateBMI);
    weight.addEventListener('input', updateBMI);

    // Initialize
    updateView();
    updateForm();
    viewMode.classList.remove('hidden');
    healthForm.classList.add('hidden');
</script>

</html>